{{ 'component-slider.css' | asset_url | stylesheet_tag }}

{%- style -%}
.before-after {
  position: relative;
  overflow: hidden;
  border-radius: var(--media-radius);
}
.before-after__image { display: block; width: 100%; height: auto; }
.before-after__after {
  position: absolute;
  inset: 0;
  width: var(--compare, 50%);
  overflow: hidden;
}
.before-after__slider {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  margin: 1rem 0 0;
}
.before-after__slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 24px; height: 24px; border-radius: 50%; background: rgb(var(--color-button)); cursor: pointer; }
.before-after__slider::-moz-range-thumb { width: 24px; height: 24px; border-radius: 50%; background: rgb(var(--color-button)); cursor: pointer; }
{%- endstyle -%}

<div class="color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width section-{{ section.id }}-padding">
    {%- if section.settings.heading != blank -%}
      <h2 class="inline-richtext {{ section.settings.heading_size }}" style="text-align: {{ section.settings.heading_alignment }};">{{ section.settings.heading }}</h2>
    {%- endif -%}
    <div class="before-after" id="BeforeAfter-{{ section.id }}">
      {% if section.settings.before_image != blank %}
        {{ section.settings.before_image | image_url: width: 2400 | image_tag: class: 'before-after__image', alt: section.settings.before_image.alt }}
      {% elsif section.settings.before_asset != blank %}
        <img src="{{ section.settings.before_asset | asset_url }}" class="before-after__image" alt="{{ section.settings.before_label | escape }}" />
      {% endif %}
      <div class="before-after__after">
        {% if section.settings.after_image != blank %}
          {{ section.settings.after_image | image_url: width: 2400 | image_tag: class: 'before-after__image', alt: section.settings.after_image.alt }}
        {% elsif section.settings.after_asset != blank %}
          <img src="{{ section.settings.after_asset | asset_url }}" class="before-after__image" alt="{{ section.settings.after_label | escape }}" />
        {% endif %}
      </div>
    </div>
    <input type="range" class="before-after__slider" min="0" max="100" value="50" aria-label="Before after slider" oninput="this.previousElementSibling.style.setProperty('--compare', this.value + '%')" />
    <div style="margin-top: 0.5rem; text-align: center;" class="caption">
      <span>{{ section.settings.before_label }}</span> â†” <span>{{ section.settings.after_label }}</span>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Before/After",
  "tag": "section",
  "class": "section",
  "settings": [
    { "type": "inline_richtext", "id": "heading", "label": "Heading", "default": "See the transformation" },
    { "type": "select", "id": "heading_size", "label": "Heading size", "default": "h2", "options": [
      {"value":"h2","label":"H2"},{"value":"h1","label":"H1"},{"value":"h0","label":"Display"}
    ]},
    { "type": "select", "id": "heading_alignment", "label": "Heading alignment", "default": "center", "options": [
      {"value":"left","label":"Left"},{"value":"center","label":"Center"},{"value":"right","label":"Right"}
    ]},
    { "type": "image_picker", "id": "before_image", "label": "Before image" },
    { "type": "text", "id": "before_asset", "label": "Before asset filename (assets/)" },
    { "type": "image_picker", "id": "after_image", "label": "After image" },
    { "type": "text", "id": "after_asset", "label": "After asset filename (assets/)" },
    { "type": "text", "id": "before_label", "label": "Before label", "default": "Before" },
    { "type": "text", "id": "after_label", "label": "After label", "default": "After" },
    { "type": "color_scheme", "id": "color_scheme", "label": "Colors", "default": "scheme-1" },
    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Padding top", "default": 28 },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Padding bottom", "default": 28 }
  ],
  "presets": [ { "name": "Before/After" } ]
}
{% endschema %}


